mount /dev/sda2 /mnt
mount /dev/sda1 /mnt/boot

arch-chroot /mnt

grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg


[ -d /sys/firmware/efi ] && echo "UEFI" || echo "Legacy BIOS"


sudo umount -R /mnt
----------------------------------------------

sudo mount --bind /dev /mnt/dev && sudo mount --bind /proc /mnt/proc && sudo mount --bind /sys /mnt/sys && sudo mount --bind /run /mnt/run

sudo chroot /mnt

grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg

exit
sudo umount -R /mnt
sudo reboot


efibootmgr --create --disk /dev/sda --part 1 --label "ArchLinux" --loader /EFI/GRUB/grubx64.efi

sudo mount /dev/sdb2 /mnt && sudo mount /dev/sdb1 /mnt/boot && sudo mount --bind /dev /mnt/dev && sudo mount --bind /proc /mnt/proc && sudo mount --bind /sys /mnt/sys && sudo mount --bind /run /mnt/run
mount | grep /mnt/run




[root@mint /]# refind-install 
ShimSource is none
Installing rEFInd on Linux....
ESP was found at /boot/efi using vfat
Found rEFInd installation in /boot/efi/EFI/refind; upgrading it.
Copied rEFInd binary files

Notice: Backed up existing icons directory as icons-backup.
Existing refind.conf file found; copying sample file as refind.conf-sample
to avoid overwriting your customizations.

EFI variables are not supported on this system.
EFI variables are not supported on this system.
error trace:
EFI variables are not supported on this system.
error trace:
Creating new NVRAM entry

ALERT: There were problems running the efibootmgr program! You may need to
rename the refind_x64.efi binary to the default name (EFI/BOOT/bootx64.efi
on x86-64 systems, EFI/BOOT/bootia32.efi on x86 systems, or
EFI/BOOT/bootaa64.efi on ARM64 systems) to have it run!

Existing //boot/refind_linux.conf found; not overwriting.

ALERT:
Installation has completed, but problems were detected. Review the output for
error messages and take corrective measures as necessary. You may need to
re-run this script or install manually before rEFInd will work.
